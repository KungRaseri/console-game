<Window x:Class="RealmForge.Views.PreviewWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Preview Generated Content"
        Height="700"
        Width="900"
        WindowStartupLocation="CenterOwner"
        Style="{StaticResource MaterialDesignWindow}">

    <Window.Resources>
        <Style x:Key="CategoryBadge"
                TargetType="Border">
            <Setter Property="Background"
                    Value="{DynamicResource MaterialDesign.Brush.Primary}"/>
            <Setter Property="CornerRadius"
                    Value="10"/>
            <Setter Property="Padding"
                    Value="8,2"/>
            <Setter Property="Margin"
                    Value="0,0,8,0"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <materialDesign:ColorZone Grid.Row="0"
                                  Mode="PrimaryMid"
                                  Padding="16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <materialDesign:PackIcon Grid.Column="0"
                                         Kind="EyeOutline"
                                         Height="32"
                                         Width="32"
                                         VerticalAlignment="Center"
                                         Margin="0,0,12,0"/>

                <StackPanel Grid.Column="1"
                        VerticalAlignment="Center">
                    <TextBlock Text="Content Preview"
                               FontSize="20"
                               FontWeight="Bold"/>
                    <TextBlock Text="See how your JSON edits affect generated content"
                               Opacity="0.8"
                               FontSize="12"/>
                </StackPanel>

                <Button Grid.Column="2"
                        Content="CLOSE"
                        Command="{Binding CloseCommand}"
                        Style="{StaticResource MaterialDesignOutlinedButton}"
                        VerticalAlignment="Center"/>
            </Grid>
        </materialDesign:ColorZone>

        <!-- Controls -->
        <materialDesign:Card Grid.Row="1"
                Margin="16,16,16,8"
                Padding="12">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                           Text="Content Type:"
                           VerticalAlignment="Center"
                           Margin="0,0,12,0"
                           FontWeight="Medium"/>

                <ComboBox Grid.Column="1"
                          ItemsSource="{Binding ContentTypes}"
                          SelectedItem="{Binding SelectedContentType}"
                          materialDesign:HintAssist.Hint="Select content type"
                          Style="{StaticResource MaterialDesignOutlinedComboBox}"
                          MinWidth="200"
                          Margin="0,0,12,0"/>

                <TextBox Grid.Column="2"
                         Text="{Binding Count, UpdateSourceTrigger=PropertyChanged}"
                         materialDesign:HintAssist.Hint="Count"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}"
                         Width="80"
                         Margin="0,0,8,0"/>

                <Button Grid.Column="3"
                        Content="GENERATE"
                        Command="{Binding GenerateCommand}"
                        Style="{StaticResource MaterialDesignRaisedButton}"
                        Margin="0,0,8,0">
                    <Button.ContentTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Refresh"
                                                         VerticalAlignment="Center"
                                                         Margin="0,0,4,0"/>
                                <TextBlock Text="{Binding}"
                                        VerticalAlignment="Center"/>
                            </StackPanel>
                        </DataTemplate>
                    </Button.ContentTemplate>
                </Button>

                <Button Grid.Column="4"
                        Content="COPY ALL"
                        Command="{Binding CopyAllCommand}"
                        Style="{StaticResource MaterialDesignOutlinedButton}">
                    <Button.ContentTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="ContentCopy"
                                                         VerticalAlignment="Center"
                                                         Margin="0,0,4,0"/>
                                <TextBlock Text="{Binding}"
                                        VerticalAlignment="Center"/>
                            </StackPanel>
                        </DataTemplate>
                    </Button.ContentTemplate>
                </Button>
            </Grid>
        </materialDesign:Card>

        <!-- Preview List -->
        <Border Grid.Row="2"
                Margin="16,8,16,16"
                BorderBrush="{DynamicResource MaterialDesign.Brush.Primary}"
                BorderThickness="1"
                CornerRadius="4">
            <ListView ItemsSource="{Binding PreviewItems}"
                      ScrollViewer.VerticalScrollBarVisibility="Auto"
                      ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                      VirtualizingPanel.IsVirtualizing="True"
                      VirtualizingPanel.VirtualizationMode="Recycling">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <materialDesign:Card Margin="4"
                                Padding="12">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <!-- Header with category badge and name -->
                                <Grid Grid.Row="0"
                                        Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <Border Grid.Column="0"
                                            Style="{StaticResource CategoryBadge}">
                                        <TextBlock Text="{Binding Category}"
                                                   Foreground="White"
                                                   FontSize="10"
                                                   FontWeight="Bold"/>
                                    </Border>

                                    <TextBlock Grid.Column="1"
                                               Text="{Binding Name}"
                                               FontSize="16"
                                               FontWeight="SemiBold"
                                               VerticalAlignment="Center"/>
                                </Grid>

                                <!-- Details -->
                                <TextBlock Grid.Row="1"
                                           Text="{Binding Details}"
                                           Opacity="0.7"
                                           TextWrapping="Wrap"
                                           Margin="0,0,0,8"/>

                                <!-- Full Description -->
                                <TextBlock Grid.Row="2"
                                           Text="{Binding FullDescription}"
                                           TextWrapping="Wrap"
                                           FontSize="12"
                                           Opacity="0.6"/>
                            </Grid>
                        </materialDesign:Card>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Border>

        <!-- Status Bar -->
        <materialDesign:ColorZone Grid.Row="3"
                                  Mode="PrimaryLight"
                                  Padding="12">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <materialDesign:PackIcon Grid.Column="0"
                                         Kind="Information"
                                         VerticalAlignment="Center"
                                         Margin="0,0,8,0"/>

                <TextBlock Grid.Column="1"
                           Text="{Binding StatusMessage}"
                           VerticalAlignment="Center"/>

                <TextBlock Grid.Column="2"
                           VerticalAlignment="Center"
                           FontWeight="Medium">
                    <Run Text="Items: "/>
                    <Run Text="{Binding PreviewItems.Count, Mode=OneWay}"/>
                </TextBlock>
            </Grid>
        </materialDesign:ColorZone>
    </Grid>
</Window>
